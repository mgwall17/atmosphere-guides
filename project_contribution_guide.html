<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="Content-Style-Type" content="text/css" />
        <meta name="generator" content="pandoc" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
                    <title></title>
        <style type="text/css">code{white-space: pre;}</style>
                          <link rel="stylesheet" href="./themes/cyverse/templates/main.css" type="text/css" />
                    <link rel="icon" href="themes/cyverse/media/favicon.ico" type="image/x-icon">
        <link rel="stylesheet" href="themes/cyverse/media/css/normalize.min.css">
        <link rel="stylesheet" href="themes/cyverse/media/css/main.css">
        <script src="themes/cyverse/media/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>
          </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

                <div class="header-container">
            <header class="wrapper clearfix">
                <div class="logo"><img src="themes/cyverse/media/cyverse_logo.png" alt="Staff Guide"></div>
                <h1 class="title"></h1>
            </header>
        </div>
        
        <div class="main-container">
            <div class="main wrapper clearfix">
              <!-- TABLE OF CONTENTS -->
                                  <aside>
                      <h3> TABLE OF CONTENTS </h3>
                      <ul>
                      <li><a href="#atmosphere-project-contribution-guide">Atmosphere Project Contribution Guide</a><ul>
                      <li><a href="#what-is-atmosphere">What is Atmosphere?</a></li>
                      <li><a href="#where-is-atmosphere-deployed">Where is Atmosphere Deployed?</a></li>
                      <li><a href="#resources-and-docs-for-new-contributors">Resources and Docs for New Contributors</a></li>
                      <li><a href="#where-is-the-code">Where is the Code?</a><ul>
                      <li><a href="#repositories-on-github">Repositories on Github</a></li>
                      </ul></li>
                      <li><a href="#key-terms">Key Terms</a></li>
                      <li><a href="#technology-stack-overview">Technology Stack Overview</a><ul>
                      <li><a href="#atmosphere1">Atmosphere(1)</a><ul>
                      <li><a href="#atmosphere2-api-and-back-end">Atmosphere(2) API and Back-End</a></li>
                      <li><a href="#troposphere-ui">Troposphere UI</a></li>
                      <li><a href="#web-server">Web Server</a></li>
                      <li><a href="#atmosphere-ansible">atmosphere-ansible</a></li>
                      </ul></li>
                      <li><a href="#clank">Clank</a></li>
                      <li><a href="#monitoring-and-management">Monitoring and Management</a><ul>
                      <li><a href="#elk">ELK</a></li>
                      <li><a href="#new-relic">New Relic</a></li>
                      <li><a href="#sentry">Sentry</a></li>
                      </ul></li>
                      <li><a href="#openstack">OpenStack</a></li>
                      <li><a href="#remote-access-methods">Remote Access Methods</a><ul>
                      <li><a href="#ssh">SSH</a></li>
                      <li><a href="#web-shell">Web Shell</a></li>
                      <li><a href="#web-desktop">Web Desktop</a></li>
                      <li><a href="#future-guacamole">Future: Guacamole</a></li>
                      </ul></li>
                      </ul></li>
                      <li><a href="#clouds">Clouds</a></li>
                      <li><a href="#tools-and-workflows">Tools and Workflows</a><ul>
                      <li><a href="#common-technologies-and-tools">Common Technologies and Tools</a></li>
                      <li><a href="#local-development-environment">Local Development Environment</a></li>
                      <li><a href="#issue-tracking-systems">Issue Tracking Systems</a></li>
                      <li><a href="#contributing-code">Contributing Code</a><ul>
                      <li><a href="#on-github">On Github</a></li>
                      </ul></li>
                      </ul></li>
                      <li><a href="#how-atmosphere-is-tested">How Atmosphere is Tested</a><ul>
                      <li><a href="#django-tests-in-atmosphere2">Django tests in Atmosphere(2)</a></li>
                      <li><a href="#travis-ci-running-style-bundlecompile-tests-for-troposphere"><a href="https://travis-ci.org/">Travis CI</a> running style &amp; bundle/compile tests for Troposphere</a></li>
                      <li><a href="#qa-team-tests-using-robot-framework-and-jmeter">QA Team tests using Robot Framework and JMeter</a></li>
                      <li><a href="#operation-sanity-behavioral-testing"><a href="https://github.com/cyverse/operation-sanity">Operation Sanity</a> behavioral testing</a></li>
                      </ul></li>
                      <li><a href="#releases-and-development-cycles">Releases and Development Cycles</a><ul>
                      <li><a href="#release-naming">Release Naming</a></li>
                      <li><a href="#approach-to-tagging-releases">Approach to Tagging Releases</a><ul>
                      <li><a href="#note-on-sequence">Note on “Sequence”</a></li>
                      <li><a href="#what-should-be-tagged">What Should Be Tagged?</a></li>
                      </ul></li>
                      <li><a href="#release-structure">Release Structure</a><ul>
                      <li><a href="#first-2-week-sprint">First 2-week Sprint</a></li>
                      <li><a href="#second-2-week-sprint">Second 2-week Sprint</a></li>
                      <li><a href="#third-1-week-sprint">Third 1-week Sprint</a></li>
                      </ul></li>
                      <li><a href="#code-branching-strategy">Code Branching Strategy</a></li>
                      </ul></li>
                      </ul></li>
                      </ul>
                  </aside>
                              <!-- MAIN CONTENT -->
              <article>
              <h1 id="atmosphere-project-contribution-guide">Atmosphere Project Contribution Guide</h1>
              <p>This guide is intended to orient community members who are interested in contributing to Atmosphere – learn about our development process, our technology stack, and our release strategy. Welcome to the project!</p>
              <p>This page has a couple of broken links, having recently been migrated from an internal wiki – they will be fixed soon once the linked content is migrated to atmosphere-guides.</p>
              <h2 id="what-is-atmosphere">What is Atmosphere?</h2>
              <p>Atmosphere or ‘atmo’ can refer to several different things:</p>
              <ul>
              <li><a href="https://atmo.cyverse.org/application">Atmosphere</a>(0), CyVerse’s “cloud computing for scientists” service</li>
              <li>Atmosphere(1), <strong>the free, open-source software project</strong> which powers the above service (and is the primary focus of these guides)</li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/atmosphere">Atmosphere</a>(2), the API and back-end component of the above software project</li>
              </ul>
              <p>For clarity, this page will disambiguate all uses of “Atmosphere”.</p>
              <h2 id="where-is-atmosphere-deployed">Where is Atmosphere Deployed?</h2>
              <p>Atmosphere(1) is deployed at CyVerse as Atmosphere(0), but also at several other organizations known by different names:</p>
              <ul>
              <li><a href="http://jetstream-cloud.org/">Jetstream Cloud</a> (partnership of Indiana University, TACC, &amp; CyVerse - Jetstream GitHub Organization: <a href="https://github.com/jetstream-cloud">jetstream-cloud</a>)</li>
              <li>MOC (Massechusetts Open Cloud) (Jonathan Bell: <a href="https://github.com/lokI8">github-profile</a>, Lucas H. Xu: <a href="https://github.com/xuhang57">github-profile</a>)</li>
              <li>Duke University / Duke Center for Genomic &amp; Computational Biology (<a href="https://github.com/Duke-GCB">Duke GCB</a>) (Darren Boss: <a href="https://genome.duke.edu/directory/gcb-staff/darren-boss">gcb-profile</a>; <a href="https://github.com/netscruff">github-profile</a>)</li>
              </ul>
              <h2 id="resources-and-docs-for-new-contributors">Resources and Docs for New Contributors</h2>
              <p>Familiarize yourself with the following links and use them as a reference. (Also check out the other guides on this site!)</p>
              <ul>
              <li><a href="./code_guidelines.html">Atmosphere Code Guidelines</a></li>
              <li><a href="./troubleshooting_guide.html">Atmosphere Troubleshooting Guide</a></li>
              <li><a href="http://docs.atmospherev2.apiary.io/">Atmosphere(2) API docs on Apiary</a></li>
              </ul>
              <h2 id="where-is-the-code">Where is the Code?</h2>
              <h3 id="repositories-on-github">Repositories on Github</h3>
              <p>(Should we make this a table of repo + link + purpose?)</p>
              <ul>
              <li><a href="https://github.com/iplantcollaborativeopensource/atmosphere">atmosphere</a>(2), and supporting projects:
              <ul>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/django-iplant-auth">django-iplant-auth</a> (used by Django backends of Atmosphere &amp; Troposphere)</li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/subspace">subspace</a> (runs the Ansible for instance deploys)</li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/rtwo">rtwo</a></li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/chromogenic">chromogenic</a> (Imaging using in Atmosphere)</li>
              <li><a href="https://github.com/jmatt/threepio">threepio</a> (will be replaced as Django logging has improved since it was created)</li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/atmosphere-v2-apiary-docs">atmosphere-v2-apiary-docs</a>, some API documentation?</li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/atmosphere-apiary-docs">atmosphere-apiary-docs</a>, some old API documentation?</li>
              </ul></li>
              <li><a href="https://github.com/iplantcollaborativeopensource/troposphere">troposphere</a>, and supporting projects:
              <ul>
              <li><a href="https://github.com/cyverse/troposphere-ui">troposphere-ui,</a> soon to be used by Troposphere</li>
              </ul></li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/atmosphere-ansible">atmosphere-ansible</a></li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/clank">clank</a>, Ansible-based automation which deploys Atmosphere(1)</li>
              <li><a href="https://github.com/cyverse/nginx_novnc_auth">nginx_novnc_auth</a></li>
              <li><a href="https://github.com/edwins/GateOne">edwins/GateOne</a></li>
              <li><a href="https://github.com/cyverse/atmosphere-guides">ansible-gateone-server</a></li>
              <li><a href="https://github.com/cyverse/atmosphere-guides">atmosphere-guides</a> documentation for Atmosphere(1)</li>
              </ul>
              <h2 id="key-terms">Key Terms</h2>
              <p>You’ll hear these a lot on the Atmosphere project:</p>
              <ul>
              <li><em>Instance</em>: a Virtual Machine (VM) or “cloud computer” running on Atmosphere(0) / OpenStack.</li>
              <li><em>Image:</em> a <a href="https://en.wikipedia.org/wiki/Disk_image">disk image</a> of a Virtual Machine (with some metadata) from which instances are created.</li>
              <li><em>Allocation</em>: the amount of “CPU time” that a user is allotted, measured in AUs (see below).</li>
              <li><em>Allocation Unit</em> <em>(AU)</em>: “roughly equivalent to using one CPU-hour, or to using one CPU core for one hour.” (<a href="https://pods.iplantcollaborative.org/wiki/display/atmman/Requesting+More+Atmosphere+Resources">source</a>)</li>
              <li><em>Modal</em>: a <a href="https://en.wikipedia.org/wiki/Modal_window">modal window</a> in a GUI; the Troposphere UI uses these extensively.</li>
              </ul>
              <h2 id="technology-stack-overview">Technology Stack Overview</h2>
              <p>This is intended to be an orientation to the main components of Atmosphere(1), their purpose, and their supporting technologies.</p>
              <h3 id="atmosphere1">Atmosphere(1)</h3>
              <p>Atmosphere(1), broadly, is a web application which supports user-friendly access to (and management of) cloud computing resources, such as virtual machines (servers/workstations) and storage volumes.</p>
              <p>Atmosphere(1) has a “micro-services” architecture in that the back-end API is separated from the front-end UI, but all deployments to date contain all components on one operating system environment (server).</p>
              <h4 id="atmosphere2-api-and-back-end">Atmosphere(2) API and Back-End</h4>
              <p>The API is written in Python using the <a href="https://www.djangoproject.com/">Django</a> web framework, backed by a <a href="https://en.wikipedia.org/wiki/PostgreSQL">PostgreSQL</a> database. As is typical for Django applications, Atmosphere(2) interacts with its database using Django’s <a href="https://en.wikipedia.org/wiki/Object-relational_mapping">object-relational mapper</a>.</p>
              <p>Things that Atmosphere(2) does:</p>
              <ul>
              <li>Interacts with cloud provider APIs to provision resources (instances, block storage volumes)</li>
              <li>Initiates Ansible playbook runs on new and redeployed instances</li>
              <li>Authenticates users</li>
              <li>Keeps track of user <a href="http://www.cyverse.org/service-level-agreement#AtmoAllo">allocations</a></li>
              </ul>
              <p>The API is <a href="http://docs.atmospherev2.apiary.io/#reference">apparently documented here</a>.</p>
              <h4 id="troposphere-ui">Troposphere UI</h4>
              <p><a href="/wiki/display/csmgmt/Troposphere">Troposphere</a> is a separate front-end for Atmosphere(1), consisting of a Django application and JavaScript “single-page application” built with the <a href="https://facebook.github.io/react/">React</a> front-end framework. Troposphere can be thought of as a JavaScript client which interacts with Atmosphere(2) via RESTful API.</p>
              <h4 id="web-server">Web Server</h4>
              <p>Both Atmosphere(2) and Troposphere are served by Nginx, which serves static assets directly and reverse proxies to uWSGI (etc.) for dynamically generated content.</p>
              <h4 id="atmosphere-ansible">atmosphere-ansible</h4>
              <p>atmosphere-ansible is the set of Ansible code that runs on newly provisioned cloud instances as part of the deployment process.</p>
              <h5 id="subspace">Subspace</h5>
              <p><a href="https://github.com/iPlantCollaborativeOpenSource/subspace">Subspace</a> is a Python project that programmatically runs Ansible playbooks; Atmosphere(2) uses it to run atmosphere-ansible.</p>
              <h3 id="clank">Clank</h3>
              <p><a href="https://github.com/iPlantCollaborativeOpenSource/clank">Clank</a> is the set of automations that deploy Atmosphere(1) and most of its components.</p>
              <p>Clank wraps the deployment process using Ansible, but significant parts are still automated with a mix of bash scripting, makefile, and a custom Python “configure” script which generates application configuration from jinja2 templates and .ini files. Also, unlike other Ansible code that you may have seen, Clank must be run locally on the destination server, not from a remote deployment host. The future direction is to refactor this into idiomatic Ansible and remove some layers of indirection.</p>
              <h3 id="monitoring-and-management">Monitoring and Management</h3>
              <p>These are optional integrations which are implemented for Atmosphere(0). They are not necessary for a successful Atmosphere(1) deployment.</p>
              <h4 id="elk">ELK</h4>
              <p><a href="http://logz.io/learn/complete-guide-elk-stack/">ELK stack</a> (Elasticsearch, Logstash, Kibana) handles logging information from Atmosphere-Ansible.</p>
              <h4 id="new-relic">New Relic</h4>
              <h4 id="sentry">Sentry</h4>
              <p>???</p>
              <h3 id="openstack">OpenStack</h3>
              <p>Atmosphere(1) is intended to be agnostic of cloud provider type, but all current deployments use OpenStack as the cloud provider back-end. OpenStack is a collection of projects which, together, provide infrastructure-as-a-service or a ‘cloud’.</p>
              <h3 id="remote-access-methods">Remote Access Methods</h3>
              <p>Atmosphere(1) supports several means of users accessing their instances.</p>
              <h4 id="ssh">SSH</h4>
              <p>Users can create a secure shell to their VMs directly over the internet, authenticating either with their Atmosphere(0) credentials or with an SSH keypair. Atmosphere(1) is essentially uninvolved in this workflow, though it provides a way for users to automatically install their public SSH key on new and re-deployed instances.</p>
              <h4 id="web-shell">Web Shell</h4>
              <p>Web Shell gets you a command line session in your browser, launched from the Troposphere UI. Web Shell uses <a href="https://liftoff.github.io/GateOne/About/index.html">Gate One</a>, a web-based terminal emulator. The Gate One server creates an SSH connection to the instance and exposes that shell to the user in a web interface, proxying the SSH traffic. For Atmosphere(0), the GateOne server is known as “bob” / “atmo-proxy”.</p>
              <p>See <a href="/wiki/display/csmgmt/GateOne+Background">GateOne Background</a> (TODO fix this link once the content is migrated) for detailed design and troubleshooting information.</p>
              <h4 id="web-desktop">Web Desktop</h4>
              <p>Web Desktop gets you a graphical desktop session in your browser, launched from the Troposphere UI. Web Desktop uses <a href="https://kanaka.github.io/noVNC">NoVNC</a>, a web-based VNC client. This is brokered through webaccess.cyverse.org.</p>
              <p><a href="https://github.com/cyverse/nginx_novnc_auth" class="uri">https://github.com/cyverse/nginx_novnc_auth</a></p>
              <p><a href="https://github.com/cyverse/clank/blob/master/playbooks/utils/install_novnc_auth.yml" class="uri">https://github.com/cyverse/clank/blob/master/playbooks/utils/install_novnc_auth.yml</a></p>
              <h4 id="future-guacamole">Future: Guacamole</h4>
              <p><a href="http://guacamole.incubator.apache.org/">Guacamole</a> is an HTML5 remote desktop gateway which provides both a command-line shell and a graphical desktop. Guacamole is planned as a replacement for Gate One and NoVNC, though this is not implemented in production yet.</p>
              <h2 id="clouds">Clouds</h2>
              <p>Atmosphere(0, 1, 2) provisions virtual machines on several ‘clouds’ which actually host the instances and computing infrastructure. Currently, all cloud providers use OpenStack. It is also possible for Atmosphere to provide access to commodity IaaS like Amazon Web Services (AWS), though this is not currently configured.</p>
              <h2 id="tools-and-workflows">Tools and Workflows</h2>
              <h3 id="common-technologies-and-tools">Common Technologies and Tools</h3>
              <p>No matter your sub-specialty, you’ll work with most/all of these as a member of the Atmosphere Team.</p>
              <ul>
              <li>Python programming language, used for Atmosphere(2), Ansible, Subspace</li>
              <li>Ansible, used for configuration management and infrastructure automation</li>
              <li>YAML markup language, used for Ansible code and variables files</li>
              <li>Markdown markup language, used for documentation</li>
              <li>SSH, used for remotely accessing servers</li>
              <li>git and Github, used for source control</li>
              </ul>
              <h3 id="local-development-environment">Local Development Environment</h3>
              <p>The local development environment-in-a-box is not yet published for community consumption. Coming soon!</p>
              <h3 id="issue-tracking-systems">Issue Tracking Systems</h3>
              <p>The Atmosphere(0) team uses several internal systems to track development cycles and support issues. Unfortunately these are not accessible to community members. For now, please use the repository-specific Issues section in the appropriate GitHub repository (perhaps <a href="https://github.com/cyverse/atmosphere">atmosphere</a>(2)) to report an issue with Atmosphere(1,2).</p>
              <p>If you are an Atmosphere(0) <em>user</em> seeking assistance and you ended up here for some reason, please log into <a href="https://atmo.cyverse.org/">Atmosphere</a> and click the “Feedback &amp; Support” link at the bottom of the page, or email support at cyverse dot org.</p>
              <h3 id="contributing-code">Contributing Code</h3>
              <p>Note that the following information may change soon as the Atmosphere(0) team refines the development process for Atmosphere(1).</p>
              <h4 id="on-github">On Github</h4>
              <p>Most of Atmosphere(1)’s code lives on GitHub. Contributions to these codebases should follow a fork-and-pull-request workflow.</p>
              <ol style="list-style-type: decimal">
              <li>Create your own fork of the repository, work on the code there, test it in your local development environment</li>
              <li>Create a pull request</li>
              <li>Have someone else review and merge your pull request; ideally two people will review it.</li>
              </ol>
              <p>Forward-facing projects that are critical to Atmosphere(1) have designated point maintainers. Pull requests to these projects should be approved by the point maintainer when possible:</p>
              <ul>
              <li><a href="https://github.com/iplantcollaborativeopensource/atmosphere">Atmosphere</a>(2): <a href="https://github.com/steve-gregory">Steve Gregory</a></li>
              <li><a href="https://github.com/iPlantCollaborativeOpenSource/troposphere">Troposphere</a>: <a href="https://github.com/lenards">Andrew Lenards</a></li>
              </ul>
              <p>Ancillary projects have a wider set of individuals with write access, these are typically members of the Atmosphere(0) team at CyVerse.</p>
              <h2 id="how-atmosphere-is-tested">How Atmosphere is Tested</h2>
              <p>The stack is tested at various levels; test coverage and the testing process is a work in progress.</p>
              <h3 id="django-tests-in-atmosphere2">Django tests in Atmosphere(2)</h3>
              <p>Unit tests written by developers can be found throughout the codebase. These tests are not currently running as part of regular build/deploy workflow, but we could!</p>
              <h3 id="travis-ci-running-style-bundlecompile-tests-for-troposphere"><a href="https://travis-ci.org/">Travis CI</a> running style &amp; bundle/compile tests for Troposphere</h3>
              <ul>
              <li>see <a href="https://github.com/iPlantCollaborativeOpenSource/troposphere/blob/master/.travis.yml">.travis.yml</a> in Troposphere for configuration</li>
              <li><a href="https://travis-ci.org/iPlantCollaborativeOpenSource/troposphere">Troposphere test results on Travis CI</a></li>
              </ul>
              <h3 id="qa-team-tests-using-robot-framework-and-jmeter">QA Team tests using Robot Framework and JMeter</h3>
              <p>Note that the following information describes processes performed by the QA Team at CyVerse who primarily support Atmosphere(0), but their effort certainly also benefits Atmosphere(1). This team is also responsible for testing other CyVerse products (e.g. Discovery Environment). Some resources described in this section are currently only accessiblt to members of CyVerse staff.</p>
              <p>Tests are built based on QA team using and reverse engineering Atmosphere(1) on atmobeta.cyverse.org, and the history of internal JIRA issues. QA team does not currently receive product specifications or release notes.</p>
              <p>Individual tests are tagged in a few dimensions:</p>
              <ul>
              <li>Type of test
              <ul>
              <li>Smoke tests, which confirm very basic communication/functionality/existence of API and UI objects</li>
              <li>Functional tests, which confirm the actual functioning (“golden path”) of API endpoints and UI objects</li>
              <li>Regression tests, which confirm that resolved issues do not recur and pushes boundaries</li>
              </ul></li>
              <li>Layer of stack under test
              <ul>
              <li>Atmosphere(2) API (HTTP calls using curl)</li>
              <li>Troposphere UI (browser driven with Selenium)</li>
              </ul></li>
              </ul>
              <p>atmobeta.cyverse.org is tested nightly, and test results can be found on <a href="https://shimerdas.iplantcollaborative.org:8443" class="uri">https://shimerdas.iplantcollaborative.org:8443</a>. (You must be a member of CyVerse staff and on an internal network to access shimerdas Jenkins server.) Only atmobeta is targeted during <em>regression</em> testing.</p>
              <p>atmo-dev.cyverse.org is tested as part of each continuous deployment. Jenkins runs tests against atmo-dev in two jobs (these links are only accessible to CyVerse staff):</p>
              <ul>
              <li><a href="https://atmo-dev.cyverse.org/jenkins/job/Test_Atmosphere/">Test_Atmosphere</a> (API tests)</li>
              <li><a href="https://atmo-dev.cyverse.org/jenkins/job/Test_Troposphere/">Test_Troposphere</a> (GUI tests)</li>
              </ul>
              <p>Test coverage is greater for the Atmosphere(2) API than for the Troposphere UI. QA team’s tests do not currently confirm that instances launch, nor do they execute the various instance access workflows (e.g. Web Shell and Web Desktop), but it is possible for this coverage to be added.</p>
              <p>If a test fails repeatedly, QA team files a JIRA ticket, tags the test with the JIRA number, and disables that test until the issue is resolved.</p>
              <p>More information on the QA team’s work can be found on <a href="http://qa-4.cyverse.org">qa-4.cyverse.org</a>, including the <a href="http://qa-4.cyverse.org/Atmosphere/">automated test suites</a> and how to run test suites locally (<a href="http://qa-4.cyverse.org/robotframework/misc/html/RobotFramework_and_iPlant.txt">1</a>, <a href="http://qa-4.cyverse.org/robotframework/misc/html/RobotFramework_Setup_for_iPlant-OLD.txt">2</a>). (Only accessible to CyVerse staff.) Note that much of the information is for other CyVerse projects, and some test framework dependencies are unnecessary if you are only testing Atmosphere.</p>
              <h3 id="operation-sanity-behavioral-testing"><a href="https://github.com/cyverse/operation-sanity">Operation Sanity</a> behavioral testing</h3>
              <p>Operation Sanity is a set of test suites written using behave, which drive a browser using Selenium. Operation Sanity exercises common Atmosphere workflows as a user: launches several instances against multiple cloud providers, ensures that those instances launch, creates and attaches volumes, and so forth. It is intended to run these tests in parallel so that long operations (e.g. waiting for an instance to launch) do not block execution.</p>
              <p>Operation Sanity is currently in a “proof of concept” state, and is currently not run automatically. There is some intended functionality (e.g. testing launch of Web Shell and Web Desktop) which needs to be built.</p>
              <h2 id="releases-and-development-cycles">Releases and Development Cycles</h2>
              <p>You can see a list of releases as branches in each GitHub repository, e.g. <a href="https://github.com/cyverse/atmosphere/branches">Atmosphere(2)</a>.</p>
              <h3 id="release-naming">Release Naming</h3>
              <p>Name should be two words, a hyphen will be added between them. Hyphenated bird names used to be the golden ticket (Abyssinian-nightjar,california-condor) but we now allow for alliterative adjective/verb and bird name combinations (ex: jamming-junglefowl, mystifying-merlin, nautical-nighthawk). Helpful Link: <a href="http://thewebsiteofeverything.com/animals/birds/beginning-with/A">Birds Beginning with Letters</a></p>
              <h3 id="approach-to-tagging-releases">Approach to Tagging Releases</h3>
              <p>In order to identify which release a repository is associated with, we need to “tag”, or annotate, the association. Currently, we name branches by release for Atmosphere &amp; Troposphere. However, there are dependencies in the instance deployment automation managed in Atmosphere-Ansible repository. This repo is used by “subspace” via Atmosphere API - yet, we are not explicitly denoting the Atmosphere-Ansible tested, verified, and deployed with an Atmosphere release.</p>
              <p>I suggest that we use <a href="https://git-scm.com/book/en/v2/Git-Basics-Tagging#Annotated-Tags">“annotated-tags”</a> over lightweight tags; this allows for a “tag name” and a message.</p>
              <p>Given that we use letter-based alliterations for release names, I suggest was use a two-digit year plus letter initials as our <em>annotation</em>. So, petrified-penguin would be 16.p-p as the initial release. If there was patches applied to release, then it would be incremental:</p>
              <ul>
              <li>16-p-p-1</li>
              <li>16-p-p-2</li>
              <li>16-q-q</li>
              <li>16-q-q-1</li>
              <li>16-r-r</li>
              <li>16-r-r-1</li>
              <li>16-r-r-2</li>
              <li>16-s-s</li>
              <li>16-t-t</li>
              <li>17-u-u</li>
              <li>17-u-u-1</li>
              <li>17-v-v</li>
              <li>17-v-v-1</li>
              </ul>
              <p>Applying an annotated tag to a repository would allow a tag-name and a message. We’d then push to the origin without specifying a branch:</p>
              <pre><code>GIT_TAG=&quot;16-s-s&quot;
              git tag -a $GIT_TAG -m &quot;Solitary-Snipe released.&quot; &amp;&amp; git push origin --tags&lt;/pre&gt;</code></pre>
              <h4 id="note-on-sequence">Note on “Sequence”</h4>
              <p>The tag-name should be “two-digit” year concatenated with “release initials” (ravenous-raven shortens to r-r). Only add an incremented integer if more than one tag for a release is needed.</p>
              <h4 id="what-should-be-tagged">What Should Be Tagged?</h4>
              <p>The repositories that <strong>should</strong> be tagged for a release are as follows:</p>
              <ul>
              <li>Atmosphere (&lt;<release-name>&gt; branch) - <a href="https://github.com/iPlantCollaborativeOpenSource/atmosphere">repo</a></li>
              <li>Troposphere (&lt;<release-name>&gt; branch) - <a href="https://github.com/iPlantCollaborativeOpenSource/troposphere">repo</a></li>
              <li>Atmosphere-Ansible (master) - <a href="https://github.com/iPlantCollaborativeOpenSource/atmosphere-ansible">repo</a></li>
              <li>Clank (master - maybe a feature-branch) - <a href="https://github.com/iPlantCollaborativeOpenSource/clank">repo</a></li>
              <li>nginx_novnc_auth (master) - <a href="https://github.com/cyverse/nginx_novnc_auth">repo</a></li>
              </ul>
              <p>We should consider tagging this fork - <a href="https://github.com/edwins/gateone" class="uri">https://github.com/edwins/gateone</a></p>
              <h3 id="release-structure">Release Structure</h3>
              <p>The structure of releases is inspired by <a href="http://blog.assembla.com/AssemblaBlog/tabid/12618/bid/36341/Secrets-of-rapid-release-cycles-from-the-Google-Chrome-team.aspx">Chrome/Chromium</a>. We aim to deliver new code to production every 5 weeks. Those 5 weeks are split into 3 sprints (2 sprints of 2-weeks and a single 1-week sprint).</p>
              <h4 id="first-2-week-sprint">First 2-week Sprint</h4>
              <ul>
              <li>new feature development</li>
              <li>upgrading dependencies</li>
              <li>testing/verification</li>
              </ul>
              <h4 id="second-2-week-sprint">Second 2-week Sprint</h4>
              <ul>
              <li>Priority bug fixes</li>
              <li>feature development <em>continued</em></li>
              <li>testing/verification</li>
              </ul>
              <h4 id="third-1-week-sprint">Third 1-week Sprint</h4>
              <ul>
              <li>Any committed works left to finish</li>
              <li>Priority/Critical tickets</li>
              <li>testing/verification</li>
              </ul>
              <h3 id="code-branching-strategy">Code Branching Strategy</h3>
              <p>(Note that the following section contains links to environments that are only accessible to members of CyVerse staff.)</p>
              <p>The master branch collects new feature development and community contributions. <a href="http://atmo-dev.cyverse.org" class="uri">http://atmo-dev.cyverse.org</a> generally tracks master. Other feature branches are used as needed.</p>
              <p>The ‘beta’ / ‘next release’ branch collects stability improvements and bug fixes; it does not typically receive new features. <a href="http://atmobeta.cyverse.org/">http://atmobeta.cyverse.org</a> generally tracks the next release.</p>
              <p>Think of each five-week cycle as an effort to 1. develop new features on the master branch, and 2. stabilize the beta/release branch for deployment to production.</p>
              <p>Bug fixes and other changes are regularly “trickled down” from the beta/release branch to the master branch, and when necessary, from production systems to beta/release.</p>
              <p>Following each release, any changes in the release branch are merged back into master. Then, master is branched into the ‘next release’ and the cycle repeats.</p>
              </article>
            </div> <!-- #main -->
        </div> <!-- #main-container -->

                <div class="footer-container">
            <footer class="wrapper">
                    <footer class="footer"> <!-- Needs to be a `include-after` -->
          		<div class="container">
          		  <div class="region region-footer">
          		    <section id="block-block-25" class="block block-block clearfix">
          		      <p><img alt="Cyverse" src="./media/cyverse_icon_transp2.png" style="width: 25px; height: 24px;">&nbsp;<a href="http://www.cyverse.org/">CyVerse</a> | <a href="http://www.cyverse.org/open-source">Open Source</a> | <img alt="NSF" src="./media/nsf1.gif" style="width: 25px; height: 25px;">&nbsp;</p>
          		    </section>
          		  </div>
          		</div>
        	    </footer>
            </footer>
        </div>
        <!-- Included at the end of body -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="themes/cyverse/media/js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
        
        <script src="themes/cyverse/media/js/main.js"></script>
            </body>
</html>
